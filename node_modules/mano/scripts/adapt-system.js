// Runs adapt script on all apps in a system

'use strict';

var deferred                        = require('deferred')
  , generateAppsList                = require('./generate-apps-list')
  , generateAppsClientModelScript   = require('./generate-apps-client-model-script')
  , generateAppsClientProgramScript = require('./generate-apps-client-program-script')
  , generateAppsClientCssScript     = require('./generate-apps-client-css-script')
  , generateAppsHtmlIndexScript     = require('./generate-apps-html-index-script')
  , generateAppsConfScript          = require('./generate-apps-conf-script')
  , generateAppsControllersScript   = require('./generate-apps-controllers-script')
  , generateAppsAccessLoaderScript  = require('./generate-apps-access-loader-script');

module.exports = function (root) {
	return deferred(
		// 1. Generate map of application configurations
		generateAppsList(root),
		// 2. Provide script that generates client model for all apps
		generateAppsClientModelScript(root),
		// 3. Provide script that generates HTML indexes for all apps
		generateAppsHtmlIndexScript(root),
		// 4. Provide script that generates bundled CSS files for all apps
		generateAppsClientCssScript(root),
		// 5. Provide script that generates client program for all apps
		generateAppsClientProgramScript(root),
		// 6. Provide script that generates apps configuration
		generateAppsConfScript(root),
		// 7. Provide script that generates apps controllers configuration
		generateAppsControllersScript(root),
		// 8. Provide script that generates apps access loader
		generateAppsAccessLoaderScript(root)
	);
};
