// Copies model generation scripts into apps

'use strict';

var path            = require('path')
  , resolveTemplate = require('es6-template-strings')
  , readFile        = require('fs2/read-file')
  , writeFile       = require('fs2/write-file')
  , resolveRoot     = require('../../lib/resolve-root-at-app')

  , resolve = path.resolve

  , appProgramTplPath = resolve(__dirname, 'program.tpl')
  , writeOpts = { intermediate: true, mode: 493 }

  , appScriptName = 'generate-client-model';

module.exports = function (appPath) {
	return readFile(appProgramTplPath)(function (template) {
		return writeFile(resolve(appPath, 'bin', appScriptName),
			resolveTemplate(template, { rootDir: resolveRoot(appPath) }), writeOpts);
	});
};
