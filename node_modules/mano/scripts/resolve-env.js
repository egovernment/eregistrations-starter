'use strict';

var memoize     = require('memoizee/plain')
  , resolve     = require('path').resolve
  , resolveRoot = require('./resolve-root')

  , resolveEnv;

resolveEnv = memoize(function (path) {
	return resolveRoot(path)(function (path) {
		var env = require(resolve(path, 'env'));
		env.root = path;
		return env;
	});
});

module.exports = function (path) { return resolveEnv(resolve(String(path))); };
