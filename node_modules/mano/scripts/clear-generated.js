'use strict';

var deferred    = require('deferred')
  , resolve     = require('path').resolve
  , unlink      = require('fs2/unlink')
  , resolveApps = require('./resolve-apps')

  , opts = { loose: true };

module.exports = function (path/*, name*/) {
	return resolveApps(path, arguments[1]).map(function (app) {
		return deferred(
			unlink(resolve(app.root, 'client/model.generated.js'), opts),
			unlink(resolve(app.root, 'public/' + app.name + '.js'), opts),
			unlink(resolve(app.root, 'public/' + app.name + '.legacy.js'), opts),
			unlink(resolve(app.root, 'public/' + app.name + '.css'), opts),
			unlink(resolve(app.root, 'public/' + app.name + '-print.css'), opts),
			unlink(resolve(app.root, 'public/' + app.name + '-legacy.css'), opts),
			unlink(resolve(app.root, app.viewPath, 'index.generated.html'), opts),
			unlink(resolve(app.root, 'server/model-tags.generated.js'), opts),
			unlink(resolve(path, 'i18n-scan-map.generated.json'), opts)
		);
	});
};
