'use strict';

var customError = require('es5-ext/error/custom')
  , isCallable  = require('es5-ext/object/is-callable')
  , callable    = require('es5-ext/object/valid-callable')
  , forEach     = require('es5-ext/object/for-each');

module.exports = function (handler, isDynamic) {
	if (isDynamic) {
		callable(handler && handler.match);
		handler = handler && handler.load;
	}
	if (handler == null) {
		throw customError("Not supported handler", 'WRONG_HANDLER');
	}
	if (!isCallable(handler)) {
		forEach(handler, function (handler) {
			if (!isCallable(handler)) {
				throw customError("Not supported handler", 'WRONG_HANDLER');
			}
		});
	}
	return handler;
};
