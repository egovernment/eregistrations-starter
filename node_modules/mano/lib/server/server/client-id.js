'use strict';

var timeUuid  = require('time-uuid')

  , expires = new Date(Date.now() + 5 * 365 * 24 * 60 * 60 * 1000);

module.exports = function (req, res, next) {
	var id = req.cookies.get('id');
	if (!id) {
		id = timeUuid();
		res.cookies.set('id', id, { expires: expires, httpOnly: false });
	}
	req.$clientId = id;
	next();
};
