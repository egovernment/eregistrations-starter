'use strict';

var deferred = require('deferred');

module.exports = function (routes) {
	return function (action, data, req, res, next) {
		var env;
		env = { res: res, req: req, action: action };
		deferred(routes.call(env, data)).done(function (result) {
			if (result === false) next();
		});
	};
};
