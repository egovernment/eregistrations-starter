'use strict';

var stringify = JSON.stringify;

module.exports = function (apps) {
	return function (req, res, next) {
		var conf = apps['apps/' + req.$appName];
		if (!conf) {
			console.error("\nError: Configuraton not found for " + stringify(req.$appName) + "\n");
			next();
			return;
		}
		req.$forceLegacy = conf.forceLegacy;
		req.$forceLegacyFullRender = conf.forceLegacy || conf.forceLegacyFullRender;
		next();
	};
};
