// Resolve user id for given object id (should be either user or business process id)

'use strict';

var businessProcessDerivedMap = require('./business-process-derived-map')
  , businessProcessManagerMap = require('./business-process-manager-map');

module.exports = function (id) {
	return businessProcessManagerMap(function self(managerMap) {
		if (managerMap.has(id)) return managerMap.get(id).slice(1);
		return businessProcessDerivedMap(function (map) {
			while (map.has('7' + id)) {
				id = map.get('7' + id);
				if (managerMap.has(id)) return managerMap.get(id).slice(1);
			}
			return null;
		});
	});
};
