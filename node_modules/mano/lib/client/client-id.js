'use strict';

var id        = require('dom-ext/html-document/#/get-cookie').call(document, 'id')
  , sessionId = require('./session-id');

if (!id) {
	console.error("Client id not set, shouldn't happen");
	id = require('time-uuid')();
	require('dom-ext/html-document/#/set-cookie')
		.call(document, 'id', id, { expires: 5 * 365 * 24 * 60 * 60 });
}

console.log("Client ID:", id + ':'  + sessionId, '[' + (new Date()).toISOString() + ']');
module.exports = id;
