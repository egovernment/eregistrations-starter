'use strict';

var rootMain = require('../main')
  , main     = require('./main')

  , customEvents = rootMain._customEvents = {};

module.exports = main;

main.addEvent = function (name, listener, useCapture) {
	if (customEvents.hasOwnProperty(name)) {
		listener = customEvents[name].get(listener);
		name = customEvents[name].base;
	}
	if (this.addEventListener) {
		this.addEventListener(name, listener, Boolean(useCapture));
	} else {
		this.attachEvent('on' + name, listener);
	}
	return this;
};

main.removeEvent = function (name, listener, useCapture) {
	if (customEvents.hasOwnProperty(name)) {
		listener = customEvents[name].get(listener);
		name = customEvents[name].base;
	}
	if (this.removeEventListener) {
		this.removeEventListener(name, listener, Boolean(useCapture));
	} else {
		this.detachEvent('on' + name, listener);
	}
	return this;
};

rootMain.preventDefault = function (e) {
	if (e.preventDefault) e.preventDefault();
	else e.returnValue = false;
};
rootMain.stopPropagation = function (e) {
	if (e.stopPropagation) e.stopPropagation();
	else e.cancelBubble = true;
};
