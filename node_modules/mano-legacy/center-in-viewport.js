'use strict';

var $               = require('./main')
  , getViewportRect = require('./get-viewport-rect')
  , getElementRect  = require('./get-element-rect')

  , max = Math.max, round = Math.round;

module.exports = $.centerInViewport = function (el/*, options*/) {
	var vpRect = getViewportRect()
	  , elRect = getElementRect(el)
	  , options = Object(arguments[1])
	  , padding = isNaN(options.padding) ? 0 : Number(options.padding)
	  , diffPoint = { x: 0, y: 0 }
	  , expectedTopLeft =  { x: 0, y: 0 };

	if (vpRect.height > elRect.height) {
		expectedTopLeft.y = vpRect.top + max(round((vpRect.height - elRect.height) / 4), padding);
	} else {
		expectedTopLeft.y = vpRect.top + padding;
	}
	if (vpRect.width > elRect.width) {
		expectedTopLeft.x = vpRect.left + max(round((vpRect.width - elRect.width) / 2), padding);
	} else {
		expectedTopLeft.x = vpRect.top + padding;
	}

	diffPoint.x = expectedTopLeft.x - elRect.left;
	diffPoint.y = expectedTopLeft.y - elRect.top;

	if (diffPoint.x) el.style.left = (el.offsetLeft + diffPoint.x) + "px";
	if (diffPoint.y) el.style.top = (el.offsetTop + diffPoint.y) + "px";
};
