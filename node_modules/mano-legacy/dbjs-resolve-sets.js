'use strict';

var $ = require('./main')
  , isArray = require('./is-array')
  , forIn   = require('./for-in')
  , ignores = require('./dbjs-ignore-names')
  , setify  = require('./setify');

module.exports = exports = $.dbjsResolveSets = function (obj) {
	forIn(obj, function (value, name) {
		if (ignores.hasOwnProperty(name)) return;
		if (!value || (typeof value !== 'object')) return;
		if (isArray(value)) {
			obj[name] = setify(value);
			return;
		}
		if (value.__setData__) return;
		exports(value);
	});
	return obj;
};
