'use strict';

var parse = require('url3/parse');

module.exports = function (router, document) {
	document.addEventListener('submit', function (event) {
		var form = event.target, method = form.getAttribute('method'), url;
		if (!method || (method.toLowerCase() !== 'post')) return;
		if (form.getAttribute('rel') === 'server') return;

		event.preventDefault();

		url = parse(form.getAttribute('action'));
		router.processPost(url.pathname, form);
	}, false);
};
