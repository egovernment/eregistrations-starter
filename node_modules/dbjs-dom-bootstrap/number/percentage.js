'use strict';

var d            = require('d')
  , makeElement  = require('dom-ext/document/#/make-element')
  , DOMInput     = require('dbjs-dom/input/number/percentage').Input

  , defineProperty = Object.defineProperty
  , _render = DOMInput.prototype._render
  , Input;

Input = function (document, type/*, options*/) { DOMInput.apply(this, arguments); };

Input.prototype = Object.create(DOMInput.prototype, {
	constructor: d(Input),
	_render: d(function () {
		var el = makeElement.bind(this.document);
		_render.call(this);
		this.dom = el('span', { class: 'input-prepend' },
			el('span', { class: 'add-on' }, "%"), this.control);
	})
});

module.exports = exports = function (db) {
	defineProperty(db.Percentage, 'DOMInput', d(Input));
};

exports.Input = Input;
